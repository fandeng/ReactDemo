import React,{Component} from 'react';
import{
	StyleSheet,
	Text,
	View,
	BackAndroid,
	Platform,
	TouchableOpacity,
	Image,
	InteractionManager,
	ScrollView,
} from 'react-native';
var ImagePicker = require('react-native-image-picker');
 // import ImagePickerManager from 'NativeModules';


import HeaderView from '../common/HeaderView';
import Common from '../common/common';
import InformationProgress from '../components/InformationProgress';

import MineInformationVC from '../pages/MineInformationVC';
import UnitsInformationVC from '../pages/UnitsInformationVC';
import EmergencyContactVC from '../pages/EmergencyContactVC';
import PhotographCertificateVC from '../pages/PhotographCertificateVC';



export default class MyDataDetial extends Component{

	constructor(props) {
	  super(props);

	  this.state = {
	  	avatarSource:require('../img/progress.png')
	  };
	}

	componentDidMount(){
 		BackAndroid.addEventListener('hardwareBackPress', () => {
    		this.props.navigator.pop()
     		return true
		});
	}

	render(){
		return (
			<View>
				<HeaderView 	titleView= {'我的资料'}
		    leftIcon={'angle-left'}
		    leftIconAction={() => this.props.navigator.pop() }/>
				<View style={styles.contentContainer}>
					<View style={{backgroundColor:'#D3D3D3',height:70,alignItems:'center',justifyContent: 'center'}}>
						<Text style={{textAlign:'center',color:'#999999'}}>完成所需资料立即申请贷款</Text>
					</View>

					<InformationProgress/>
					<View style={{backgroundColor:'#D3D3D3',height:30}}></View>

					<View style={{flexDirection:'column',flex:1}}>
						<View style={{flexDirection:'row',flex:1}}>

							<TouchableOpacity style={styles.view_style}
									onPress = {this.onClick.bind(this,MineInformationVC)}>
							<Image style = {styles.img_style} source={require('../img/progress.png')}/>
							<Text key={'text'} style={styles.text_style}>个人信息</Text>
							</TouchableOpacity>

							<View style={[styles.line_style,{marginTop:10}]}></View>

							<TouchableOpacity style={styles.view_style}
									onPress = {this.onClick.bind(this,UnitsInformationVC)}>
							<Image style = {styles.img_style} source={require('../img/progress.png')}/>
							<Text key={'text'} style={styles.text_style}>单位信息</Text>
							</TouchableOpacity>
						</View>
						<View style={{height:1,backgroundColor:'#D3D3D3',alignItems:'center'}}></View>
						<View style={{flexDirection:'row',flex:1}}>
							<TouchableOpacity style={styles.view_style}
									onPress = {this.onClick.bind(this,PhotographCertificateVC)}>

							<Image style = {styles.img_style} source={this.state.avatarSource}/>
							<Text key={'text'} style={styles.text_style}>拍照认证</Text>

							</TouchableOpacity>

							<View style={[styles.line_style,{marginBottom:10}]}></View>

							<TouchableOpacity style={styles.view_style}
									onPress = {this.onClick.bind(this,EmergencyContactVC)}>
							<Image style = {styles.img_style} source={require('../img/progress.png')}/>
							<Text key={'text'} style={styles.text_style}>紧急联系人</Text>
							</TouchableOpacity>
						</View>
					</View>

				</View>

			</View>
			);
	}

	onClick(item){
		InteractionManager.runAfterInteractions(() => {
				this.props.navigator.push({
						name: '二级',
						component: item,
				})
		});
	}
}



var styles =StyleSheet.create({
	contentContainer: {
      paddingVertical: 0,
      flexDirection:'column',
      flex:1,
      height: Platform.OS == 'ios'? Common.window.height-64:Common.window.height - 50,
    },
    view_style:{flex:1,alignItems: 'center',justifyContent: 'center',flexDirection:'column'},
    line_style:{width:1,backgroundColor:'#D3D3D3',alignItems:'center'},
	img_style:{height:80,width:80},
	text_style:{textAlign:'center',fontSize:18},
});
